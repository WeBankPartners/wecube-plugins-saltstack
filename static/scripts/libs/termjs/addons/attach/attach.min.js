(function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.attach=e()}})(function(){return function(){function e(t,n,r){function o(a,i){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!i&&u)return u(a,!0);if(f)return f(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var f="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}return e}()({1:[function(e,t,n){"use strict";function r(e,t,n,r){function a(e,t){r?i.__pushToBuffer(e||t):i.write(e||t)}var i=e;n="undefined"==typeof n||n,i.__socket=t,i.__flushBuffer=function(){i.write(i.__attachSocketBuffer),i.__attachSocketBuffer=null},i.__pushToBuffer=function(e){i.__attachSocketBuffer?i.__attachSocketBuffer+=e:(i.__attachSocketBuffer=e,setTimeout(i.__flushBuffer,10))};var u;i.__getMessage=function(e){var t;if("object"==typeof e.data)if(u||(u=new TextDecoder),e.data instanceof ArrayBuffer)t=u.decode(e.data),a(t);else{var n=new FileReader;n.addEventListener("load",function(){t=u.decode(n.result),a(t)}),n.readAsArrayBuffer(e.data)}else{if("string"!=typeof e.data)throw Error('Cannot handle "'+typeof e.data+'" websocket message.');a(e.data)}},i.__sendData=function(e){1===t.readyState&&t.send(e)},i._core.register(o(t,"message",i.__getMessage)),n&&i._core.register(i.addDisposableListener("data",i.__sendData)),i._core.register(o(t,"close",function(){return f(i,t)})),i._core.register(o(t,"error",function(){return f(i,t)}))}function o(e,t,n){return e.addEventListener(t,n),{dispose:function(){n&&(e.removeEventListener(t,n),n=null)}}}function f(e,t){var n=e;n.off("data",n.__sendData),t="undefined"==typeof t?n.__socket:t,t&&t.removeEventListener("message",n.__getMessage),delete n.__socket}function a(e){e.prototype.attach=function(e,t,n){r(this,e,t,n)},e.prototype.detach=function(e){f(this,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.attach=r,n.detach=f,n.apply=a},{}]},{},[1])(1)});